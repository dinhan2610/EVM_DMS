// Tối ưu UX/UI cho nút toggle menu trong sidebar
.button-sm-hover {
  // Remove hover effect sau khi click
  &:focus {
    outline: none;
    box-shadow: none;
  }
  
  &:active {
    transform: scale(0.95);
  }
  
  // Transition mượt mà
  .button-sm-hover-icon {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
}

// LUÔN HIỂN THỊ nút ở sidebar cho mọi trạng thái menu
html[data-menu-size='sm-hover'],
html[data-menu-size='sm-hover-active'] {
  .main-nav {
    &:not(:hover) {
      .button-sm-hover {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: absolute !important;
        right: -14px !important;
        top: 70px !important;
        z-index: 1050 !important;
        width: 28px !important;
        height: 28px !important;
        border-radius: 50% !important;
        border: 2px solid var(--bs-border-color) !important;
        background: var(--bs-card-bg) !important;
        box-shadow: 0 2px 12px rgba(0,0,0,0.2) !important;
        padding: 0 !important;
        
        .button-sm-hover-icon {
          width: 100% !important;
          height: 100% !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          font-size: 16px !important;
        }
        
        &:hover {
          background: var(--bs-primary) !important;
          color: white !important;
          border-color: var(--bs-primary) !important;
          transform: scale(1.1) !important;
        }
      }
    }
    
    &:hover {
      .button-sm-hover {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
      }
    }
  }
}

// Hiển thị nút khi menu EXPANDED
html[data-menu-size='default'],
html[data-menu-size='condensed'] {
  .button-sm-hover {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
}

// Responsive: Mobile - Hiển thị backdrop toggle thay vì nút sidebar
@media (max-width: 991.98px) {
  .button-sm-hover {
    display: none !important;
  }
  
  // Thêm nút hamburger mobile ở topbar
  .topbar .navbar-header > div:first-child::before {
    content: '';
    display: block;
    width: 40px;
    height: 40px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z'/%3E%3C/svg%3E");
    background-size: 24px;
    background-position: center;
    background-repeat: no-repeat;
    cursor: pointer;
  }
}
